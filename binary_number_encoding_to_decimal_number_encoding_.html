<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Binary Number Encoding to Decimal Number Encoding</title>
</head>

<body>
  <p style="margin-bottom: 0.25rem;">
    This calibration is devoted to God.<br>
    In the name of God I have permission to calibrate the consciousness level of what is held in mind.
  </p>
  <button id="l">L</button>
  <button id="r">R</button>
  <div id="output" style="margin-top: 0.25rem;"></div>
  <script>
    const maxNumber = 1000
    const numberOfBits = calculateNumberOfBits(maxNumber)
    console.log('numberOfBits', numberOfBits)

    function calculateNumberOfBits(maxNumber) {
      // 2 ** numberOfBits = maxNumber
      return Math.ceil(Math.log2(maxNumber))
    }

    const $l = document.getElementById('l')
    const $r = document.getElementById('r')
    const $output = document.getElementById('output')

    let number = 0n
    let counter = 0

    $l.addEventListener('click', () => {
      number = (number << 1n) | 1n
      next()
      output()
    })

    $r.addEventListener('click', () => {
      number = (number << 1n) | 0n
      next()
      output()
    })

    function next() {
      counter++
    }

    function output() {
      outputInConsole()
      $output.textContent = number.toString(10)
      if (counter === numberOfBits) {
        $l.setAttribute('disabled', String(true))
        $r.setAttribute('disabled', String(true))
      }
    }

    function outputInConsole() {
      let numberAsString = number.toString(2)
      numberAsString = numberAsString.padStart(counter, '0')
      console.log(numberAsString)
    }
  </script>
</body>

</html>
